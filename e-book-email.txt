import React, { useState, useEffect, useRef } from 'react';
import { 
  Shield, Mail, MessageCircle, Scale, CheckCircle, AlertTriangle, 
  FileText, Lock, ChevronDown, Smartphone, BookOpen, Award, 
  ArrowLeft, Server, UserCheck, Send, Bot, Sparkles, Copy, Loader, 
  HelpCircle, AlertOctagon, FileCheck, Gavel, WifiOff
} from 'lucide-react';

// --- CONFIGURACI√ìN Y CEREBRO DE RESPALDO (FALLBACK) ---
const apiKey = ""; // Cuando tengas tu propia Key de Google AI, la pondr√°s aqu√≠ o en variables de entorno.

// BASE DE CONOCIMIENTO LOCAL (CEREBRO DE RESPALDO VECY)
// Se activa si la API falla, garantizando que la app NUNCA se quede en blanco.
const localKnowledgeBase = {
  whatsapp: `‚ö†Ô∏è **ALERTA JUR√çDICA VECY SOBRE WHATSAPP**\n\nColega, usar WhatsApp para cerrar negocios es un riesgo patrimonial alto. Razones t√©cnicas:\n\n1. **Volatilidad:** Los mensajes pueden ser "Editados" o "Eliminados para todos". Esto rompe la cadena de custodia de la prueba.\n2. **Mensajes Ef√≠meros:** Si activan la autodestrucci√≥n, pierdes la evidencia en 24h.\n3. **Costo Procesal:** Para que un juez acepte un chat impugnado, debes pagar un perito inform√°tico forense (costoso y lento).\n\n‚úÖ **Soluci√≥n:** Usa WhatsApp para la log√≠stica ("ya llegu√©"), pero formaliza la oferta y el cierre SIEMPRE por correo electr√≥nico.`,
  
  correo: `üõ°Ô∏è **EL PODER DEL CORREO ELECTR√ìNICO (LEY 527)**\n\nEl correo es tu seguro de vida inmobiliario. Bajo la Ley 527 de 1999:\n\n1. **Prueba Plena:** Es un "Mensaje de Datos" con plena validez jur√≠dica.\n2. **Inmutabilidad:** Una vez enviado, queda grabado en los servidores. Nadie puede editarlo unilateralmente.\n3. **Trazabilidad:** Los encabezados (headers) prueban origen y destino.\n\nüí° **Tip VECY:** Si el cliente responde "Ok" a tu correo de honorarios, el contrato de corretaje se considera perfeccionado legalmente.`,
  
  cobro: `üí∞ **C√ìMO COBRAR SIN CONTRATO F√çSICO**\n\nSi no firmaste papel, acude a la "Confesi√≥n Presunta" v√≠a digital:\n\n1. Re√∫ne la trazabilidad: Correos de presentaci√≥n del cliente, confirmaci√≥n de cita y env√≠o de oferta.\n2. Si usaste **MailSuite**, adjunta el certificado de apertura.\n3. Redacta una "Cuenta de Cobro con Preaviso Jur√≠dico" citando el Art. 864 del C√≥digo de Comercio (oferta aceptada t√°citamente).\n\n¬øQuieres que te redacte el correo de cobro? Ve a la secci√≥n de Herramientas.`,
  
  visita: `ü§ù **ACUERDO DE PUNTAS Y VISITAS**\n\nAntes de la visita, env√≠a un correo al colega o propietario:\n\n"Confirmo visita al inmueble [X] con mi cliente [Y]. En caso de cierre, mis honorarios son del [3%] o [50% de la punta compartida]. La aceptaci√≥n de la visita ratifica este acuerdo."\n\nEsto blinda tu comisi√≥n aunque no firmen un documento f√≠sico.`,
  
  default: `Soy Eddu-AI, Abogado Senior del equipo VECY. üèõÔ∏è\n\nEn este momento estoy operando en **Modo de Respaldo Seguro**. Puedo orientarte sobre:\n\n‚Ä¢ Riesgos de WhatsApp vs Seguridad del Email.\n‚Ä¢ C√≥mo cobrar comisiones sin contrato impreso.\n‚Ä¢ Uso de MailSuite y 4-72.\n\nPor favor, s√© m√°s espec√≠fico con tu consulta jur√≠dica.`
};

// GENERADOR DE DOCUMENTOS DE RESPALDO
const localDocumentTemplates = {
  presentacion: `ASUNTO: PRESENTACI√ìN FORMAL DE CLIENTE Y ACUERDO DE COMISI√ìN - [Direcci√≥n Inmueble]\n\nEstimado(a) Propietario(a),\n\nActuando en calidad de asesor profesional de VECY BIENES RA√çCES, presento formalmente a mi cliente, el Sr(a). [NOMBRE CLIENTE], interesado en su inmueble ubicado en [DIRECCI√ìN].\n\nConfirmamos que la visita est√° programada para [FECHA/HORA].\n\nCONDICIONES DEL CORRETAJE:\nEn caso de concretarse la venta/arriendo con este cliente (o sus relacionados), se reconocer√°n los honorarios profesionales pactados del [3% / UN CANON] a favor de mi firma.\n\nCL√ÅUSULA DE VALIDEZ DIGITAL:\nEste mensaje constituye un acuerdo vinculante. La aceptaci√≥n de la visita implica la aceptaci√≥n de las condiciones aqu√≠ descritas, conforme a la Ley 527 de 1999 sobre validez de mensajes de datos.\n\nCordialmente,\n\n[TU NOMBRE]\nAgente VECY BIENES RA√çCES`,
  
  cobro: `ASUNTO: RECLAMACI√ìN PREJUR√çDICA DE HONORARIOS - INMUEBLE [DIRECCI√ìN]\n\nRespetados se√±ores,\n\nMe dirijo a ustedes para solicitar el pago de la comisi√≥n derivada de la venta del inmueble de la referencia, perfeccionada con el cliente [NOMBRE] presentado por mi gesti√≥n.\n\nHECHOS:\n1. El d√≠a [FECHA], present√© al cliente v√≠a correo electr√≥nico (ver anexo).\n2. Se realiz√≥ la visita con su autorizaci√≥n.\n3. El negocio se cerr√≥ por valor de [VALOR].\n\nFUNDAMENTO JUR√çDICO:\nSeg√∫n el C√≥digo de Comercio y la Ley 527 de 1999, existe un contrato de corretaje perfeccionado por el intercambio de mensajes de datos y la gesti√≥n efectiva.\n\nSolicito el pago inmediato para evitar el traslado de este cobro a la instancia judicial.\n\nAtentamente,\n\n[TU NOMBRE]\nDepartamento Jur√≠dico`,
  
  alianza: `ASUNTO: PROPUESTA DE ALIANZA Y PUNTAS COMPARTIDAS (50/50)\n\nEstimado Colega,\n\nDesde VECY BIENES RA√çCES tenemos un cliente calificado interesado en tu captaci√≥n de [BARRIO/EDIFICIO].\n\nPROPUESTA DE TRABAJO:\nTrabajamos bajo el esquema est√°ndar de puntas compartidas (50% para cada parte sobre la comisi√≥n total cobrada).\n\nPor favor confirmar por esta v√≠a para proceder con el agendamiento. Este correo servir√° como constancia de nuestro acuerdo entre profesionales.\n\nQuedo atento,\n\n[TU NOMBRE]`
};

const callGemini = async (prompt, systemInstruction) => {
  // Simulaci√≥n de delay para realismo
  const delay = ms => new Promise(res => setTimeout(res, ms));
  await delay(1500);

  // Intentar conectar a la API (Fallar√° en preview si no hay key, activando el catch)
  try {
    if (!apiKey) throw new Error("No API Key");
    
    const response = await fetch(
      `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`,
      {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          contents: [{ parts: [{ text: prompt }] }],
          systemInstruction: { parts: [{ text: systemInstruction }] },
        }),
      }
    );

    if (!response.ok) throw new Error("API Connection Failed");
    const data = await response.json();
    return data.candidates?.[0]?.content?.parts?.[0]?.text;

  } catch (error) {
    console.log("Activando Protocolo de Respaldo VECY (Modo Offline)");
    
    // L√ìGICA DEL CEREBRO DE RESPALDO (LOCAL)
    const lowerPrompt = prompt.toLowerCase();
    
    // Detector de intenciones para documentos
    if (systemInstruction.includes("redactar un DOCUMENTO")) {
      if (lowerPrompt.includes("cobro") || lowerPrompt.includes("reclamaci√≥n")) return localDocumentTemplates.cobro;
      if (lowerPrompt.includes("alianza") || lowerPrompt.includes("colega")) return localDocumentTemplates.alianza;
      return localDocumentTemplates.presentacion; // Default document
    }

    // Detector de intenciones para chat
    if (lowerPrompt.includes("whatsapp") || lowerPrompt.includes("chat")) return localKnowledgeBase.whatsapp;
    if (lowerPrompt.includes("correo") || lowerPrompt.includes("email") || lowerPrompt.includes("527")) return localKnowledgeBase.correo;
    if (lowerPrompt.includes("cobrar") || lowerPrompt.includes("pago") || lowerPrompt.includes("comisi√≥n")) return localKnowledgeBase.cobro;
    if (lowerPrompt.includes("visita") || lowerPrompt.includes("agendar")) return localKnowledgeBase.visita;
    
    return localKnowledgeBase.default;
  }
};

// --- COMPONENTES ---

const EdduAIChat = () => {
  const [input, setInput] = useState('');
  const [messages, setMessages] = useState([
    { 
      id: 1, 
      type: 'bot', 
      text: '¬°Saludos, colega! Soy Eddu-AI, Abogado Senior en Derecho Inmobiliario y Tecnolog√≠a de VECY. ‚öñÔ∏èüèõÔ∏è\n\nMi misi√≥n es blindar tu patrimonio. Preg√∫ntame sobre:\n\n‚Ä¢ Por qu√© WhatsApp es un riesgo jur√≠dico.\n‚Ä¢ Ley 527 de 1999 y validez del correo.\n‚Ä¢ C√≥mo cobrar comisiones sin contrato f√≠sico.\n‚Ä¢ Herramientas como MailSuite y 4-72.' 
    }
  ]);
  const [isTyping, setIsTyping] = useState(false);
  const messagesEndRef = useRef(null);

  const scrollToBottom = () => {
    messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
  };

  useEffect(() => {
    scrollToBottom();
  }, [messages]);

  const handleSend = async () => {
    if (!input.trim()) return;

    const userMsg = { id: Date.now(), type: 'user', text: input };
    setMessages(prev => [...prev, userMsg]);
    setInput('');
    setIsTyping(true);

    const systemPrompt = `Eres Eddu-AI, Abogado Senior de VECY. Experto en Derecho Inmobiliario Digital.`; // Prompt simplificado para el fallback logic

    const responseText = await callGemini(userMsg.text, systemPrompt);
    
    const botMsg = { id: Date.now() + 1, type: 'bot', text: responseText };
    setMessages(prev => [...prev, botMsg]);
    setIsTyping(false);
  };

  return (
    <div className="flex flex-col h-[650px] w-full max-w-5xl mx-auto bg-[#111] rounded-lg border border-[#333] overflow-hidden shadow-2xl relative animate-fade-in">
      {/* HEADER DEL CHAT */}
      <div className="bg-[#1c1c1c] p-4 border-b border-[#333] flex items-center justify-between">
        <div className="flex items-center gap-4">
          <div className="relative">
            {/* AVATAR EDDU-AI OFICIAL */}
            <img 
              src="https://static.wixstatic.com/media/334454_0c2cde563d9d4bda967891c348875d22~mv2.png" 
              alt="Eddu-AI Avatar" 
              className="w-14 h-14 rounded-full object-cover border-2 border-[#bf953f] shadow-[0_0_15px_rgba(191,149,63,0.3)] bg-black"
            />
            <div className="absolute bottom-0 right-0 w-3 h-3 bg-[#10b981] rounded-full border-2 border-[#1c1c1c]"></div>
          </div>
          <div>
            <h3 className="text-white font-bold text-lg flex items-center gap-2 font-serif">
              Eddu-AI <span className="text-[10px] bg-[#bf953f]/20 text-[#bf953f] px-2 py-0.5 rounded-full border border-[#bf953f]/30 font-sans tracking-wide">ABOGADO SENIOR</span>
            </h3>
            <p className="text-[#d4af37] text-xs uppercase tracking-widest">Inteligencia Jur√≠dica VECY</p>
          </div>
        </div>
        <div className="hidden md:flex items-center gap-2 bg-[#10b981]/10 px-4 py-2 rounded-full border border-[#10b981]/30">
          <div className="w-2 h-2 bg-[#10b981] rounded-full animate-pulse"></div> 
          <span className="text-[#10b981] text-xs font-bold uppercase tracking-wider">Sistema Operativo</span>
        </div>
      </div>

      {/* AREA DE MENSAJES */}
      <div className="flex-1 overflow-y-auto p-6 space-y-6 bg-black/50 custom-scrollbar">
        {messages.map((msg) => (
          <div key={msg.id} className={`flex ${msg.type === 'user' ? 'justify-end' : 'justify-start'}`}>
            <div className={`max-w-[85%] rounded-2xl p-5 ${
              msg.type === 'user' 
                ? 'bg-[#1c1c1c] border border-[#333] text-gray-200 rounded-tr-none shadow-lg' 
                : 'bg-gradient-to-br from-[#2e1a0f] to-[#1a0e08] border border-[#bf953f]/30 text-gray-100 rounded-tl-none shadow-lg'
            }`}>
              <p className="text-sm leading-relaxed whitespace-pre-line font-light">{msg.text}</p>
            </div>
          </div>
        ))}
        {isTyping && (
          <div className="flex justify-start">
            <div className="bg-[#2e1a0f] px-6 py-4 rounded-2xl rounded-tl-none border border-[#bf953f]/30 flex items-center gap-3">
              <div className="flex space-x-1">
                <div className="w-2 h-2 bg-[#d4af37] rounded-full animate-bounce" style={{ animationDelay: '0ms' }}></div>
                <div className="w-2 h-2 bg-[#d4af37] rounded-full animate-bounce" style={{ animationDelay: '150ms' }}></div>
                <div className="w-2 h-2 bg-[#d4af37] rounded-full animate-bounce" style={{ animationDelay: '300ms' }}></div>
              </div>
              <span className="text-xs text-[#d4af37] animate-pulse font-semibold">Analizando jurisprudencia...</span>
            </div>
          </div>
        )}
        <div ref={messagesEndRef} />
      </div>

      {/* INPUT */}
      <div className="p-5 bg-[#1c1c1c] border-t border-[#333]">
        <div className="flex items-center gap-3">
          <input
            type="text"
            value={input}
            onChange={(e) => setInput(e.target.value)}
            onKeyPress={(e) => e.key === 'Enter' && handleSend()}
            placeholder="Preg√∫ntale: ¬øC√≥mo cobro si no firmaron contrato?"
            className="flex-1 bg-black border border-[#333] rounded-sm px-6 py-4 text-sm text-white focus:outline-none focus:border-[#bf953f] transition-colors placeholder-gray-600"
          />
          <button 
            onClick={handleSend}
            disabled={isTyping}
            className={`p-4 bg-gradient-to-r from-[#bf953f] to-[#aa771c] rounded-sm text-black hover:scale-105 transition-transform shadow-[0_0_15px_rgba(191,149,63,0.3)] ${isTyping ? 'opacity-50 cursor-not-allowed' : ''}`}
          >
            <Send className="w-5 h-5" />
          </button>
        </div>
      </div>
    </div>
  );
};

const EmailGeneratorView = ({ onBack }) => {
  const [topic, setTopic] = useState('');
  const [details, setDetails] = useState('');
  const [generatedEmail, setGeneratedEmail] = useState('');
  const [loading, setLoading] = useState(false);

  const handleGenerate = async () => {
    if (!topic) return;
    setLoading(true);
    
    const systemPrompt = `Eres el Redactor Jur√≠dico de VECY. Tu tarea es redactar un DOCUMENTO LEGAL...`;
    const userPrompt = `Redactar documento sobre: ${topic}. Detalles: ${details}`;

    const result = await callGemini(userPrompt, systemPrompt);
    setGeneratedEmail(result);
    setLoading(false);
  };

  const copyToClipboard = () => {
    navigator.clipboard.writeText(generatedEmail);
  };

  return (
    <div className="min-h-screen pt-24 px-6 pb-12 animate-fade-in flex flex-col items-center w-full">
      <div className="w-full max-w-6xl flex justify-between items-center mb-8">
        <button onClick={onBack} className="flex items-center text-[#d4af37] hover:text-white transition-colors">
          <ArrowLeft className="w-5 h-5 mr-2" /> Volver al Bufete
        </button>
        <div className="text-right hidden md:block">
          <h2 className="text-2xl font-serif font-bold text-white flex items-center justify-end gap-2">
            Redactor Jur√≠dico VECY <Gavel className="w-5 h-5 text-[#bf953f]" />
          </h2>
          <p className="text-xs text-gray-500 uppercase tracking-widest">Generador Autom√°tico de Documentos</p>
        </div>
      </div>

      <div className="grid md:grid-cols-2 gap-10 w-full max-w-7xl">
        <div className="bg-[#1c1c1c] p-10 rounded-sm border border-[#333] h-fit shadow-2xl">
          <div className="mb-8">
            <label className="block text-[#d4af37] text-xs font-bold uppercase tracking-widest mb-3">Tr√°mite Legal a Realizar</label>
            <select 
              value={topic}
              onChange={(e) => setTopic(e.target.value)}
              className="w-full bg-black border border-[#333] rounded-sm p-4 text-white focus:border-[#bf953f] focus:outline-none transition-colors text-sm"
            >
              <option value="">Seleccione el tipo de tr√°mite...</option>
              <optgroup label="Gesti√≥n Comercial">
                <option value="presentacion">Presentaci√≥n Formal de Cliente</option>
                <option value="visita">Agendamiento de Visita Blindada</option>
                <option value="alianza">Alianza con Colega (Puntas Compartidas)</option>
              </optgroup>
              <optgroup label="Gesti√≥n Jur√≠dica">
                <option value="cobro">Reclamaci√≥n de Comisi√≥n (Cobro)</option>
              </optgroup>
            </select>
          </div>
          <div className="mb-8">
            <label className="block text-[#d4af37] text-xs font-bold uppercase tracking-widest mb-3">Detalles (Opcional en Modo Respaldo)</label>
            <textarea 
              value={details}
              onChange={(e) => setDetails(e.target.value)}
              placeholder="Ingresa nombres, valores o direcciones..."
              className="w-full bg-black border border-[#333] rounded-sm p-4 text-white h-64 focus:border-[#bf953f] focus:outline-none resize-none text-sm leading-relaxed"
            />
          </div>
          <button 
            onClick={handleGenerate}
            disabled={loading || !topic}
            className={`w-full py-5 font-bold text-black uppercase tracking-widest rounded-sm transition-all duration-300 flex items-center justify-center gap-3 ${loading || !topic ? 'bg-gray-800 cursor-not-allowed text-gray-500' : 'bg-gradient-to-r from-[#bf953f] to-[#aa771c] hover:scale-[1.01] shadow-[0_0_20px_rgba(191,149,63,0.3)]'}`}
          >
            {loading ? <Loader className="w-5 h-5 animate-spin" /> : <Sparkles className="w-5 h-5" />}
            {loading ? 'Redactando...' : 'Generar Documento'}
          </button>
        </div>
        
        <div className="bg-[#111] p-10 rounded-sm border border-[#333] relative min-h-[600px] flex flex-col shadow-2xl">
          <div className="absolute top-0 right-0 p-6">
             <button onClick={copyToClipboard} className="p-2 hover:bg-[#333] rounded text-gray-400 hover:text-[#d4af37] transition-colors" title="Copiar">
               <Copy className="w-6 h-6" />
             </button>
          </div>
          <h3 className="text-white font-serif font-bold mb-6 border-b border-[#333] pb-4 flex items-center gap-2">
            <FileCheck className="w-5 h-5 text-[#10b981]" /> Vista Previa del Documento
          </h3>
          {generatedEmail ? (
            <div className="flex-1 overflow-y-auto pr-4 custom-scrollbar">
              <div className="whitespace-pre-line text-gray-300 text-sm leading-7 font-light font-serif">
                {generatedEmail}
              </div>
            </div>
          ) : (
            <div className="flex-1 flex flex-col items-center justify-center text-gray-600 opacity-40">
              <Scale className="w-20 h-20 mb-6" />
              <p className="text-center text-sm max-w-xs">Esperando instrucciones...</p>
            </div>
          )}
        </div>
      </div>
    </div>
  );
};

// --- VISTAS ESTATICAS ---
const LegalView = ({ onBack }) => (
  <div className="min-h-screen pt-24 px-6 pb-12 animate-fade-in w-full">
    <button onClick={onBack} className="flex items-center text-[#d4af37] mb-8 hover:text-white transition-colors"><ArrowLeft className="w-5 h-5 mr-2" /> Volver</button>
    <div className="max-w-4xl mx-auto bg-[#1c1c1c] p-12 rounded-sm border border-[#333] shadow-2xl">
      <h1 className="text-3xl font-serif font-bold text-white mb-8 border-b border-[#333] pb-6 flex items-center gap-3"><Scale className="w-8 h-8 text-[#d4af37]" /> Aviso Legal</h1>
      <div className="space-y-8 text-gray-400 text-sm leading-7 text-justify"><p><strong>1. NATURALEZA DEL SERVICIO:</strong> VECY BIENES RA√çCES ofrece esta herramienta educativa sobre la Ley 527 de 1999.</p><p><strong>2. RESPONSABILIDAD:</strong> El uso de los documentos generados es responsabilidad exclusiva del agente.</p></div>
    </div>
  </div>
);

const DataPolicyView = ({ onBack }) => (
  <div className="min-h-screen pt-24 px-6 pb-12 animate-fade-in w-full">
    <button onClick={onBack} className="flex items-center text-[#d4af37] mb-8 hover:text-white transition-colors"><ArrowLeft className="w-5 h-5 mr-2" /> Volver</button>
    <div className="max-w-4xl mx-auto bg-[#1c1c1c] p-12 rounded-sm border border-[#333] shadow-2xl">
      <h1 className="text-3xl font-serif font-bold text-white mb-8 border-b border-[#333] pb-6 flex items-center gap-3"><Server className="w-8 h-8 text-[#10b981]" /> Pol√≠tica de Datos</h1>
      <div className="space-y-6 text-gray-400 text-sm leading-relaxed"><p>Cumplimiento de la <strong>Ley 1581 de 2012</strong>. VECY promueve una pol√≠tica de <strong>CERO PAPEL</strong>.</p></div>
    </div>
  </div>
);

const SupportView = ({ onBack }) => (
  <div className="min-h-screen pt-24 px-6 pb-12 animate-fade-in flex flex-col items-center w-full">
    <div className="w-full max-w-5xl flex justify-between items-center mb-8">
      <button onClick={onBack} className="flex items-center text-[#d4af37] hover:text-white transition-colors"><ArrowLeft className="w-5 h-5 mr-2" /> Volver al Inicio</button>
      <div className="text-right hidden md:block"><h2 className="text-2xl font-serif font-bold text-white">Bufete Jur√≠dico Virtual</h2><p className="text-xs text-gray-500 uppercase tracking-widest">Consultor√≠a Especializada VECY</p></div>
    </div>
    <EdduAIChat />
  </div>
);

const App = () => {
  const [scrolled, setScrolled] = useState(false);
  const [currentView, setCurrentView] = useState('home');

  useEffect(() => {
    const handleScroll = () => setScrolled(window.scrollY > 50);
    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  const changeView = (viewName) => {
    if (typeof window !== 'undefined') window.scrollTo({ top: 0, behavior: 'smooth' });
    setCurrentView(viewName);
  };

  const scrollToSection = (id) => {
    if (currentView !== 'home') {
      changeView('home');
      setTimeout(() => document.getElementById(id)?.scrollIntoView({ behavior: 'smooth' }), 100);
    } else {
      document.getElementById(id)?.scrollIntoView({ behavior: 'smooth' });
    }
  };

  const theme = {
    background: 'radial-gradient(circle at center, #1a1a1a 0%, #0a0a0a 60%, #000000 100%)',
    goldGradient: 'linear-gradient(135deg, #bf953f 0%, #fcf6ba 25%, #b38728 50%, #fbf5b7 75%, #aa771c 100%)',
    borderGold: '1px solid rgba(191, 149, 63, 0.4)'
  };

  const navItems = [
    { id: 'mito', label: 'Riesgos de WhatsApp' },
    { id: 'ley', label: 'Marco Legal 527' },
    { id: 'estrategia', label: 'Blindaje VECY' },
    { id: 'herramientas', label: 'Herramientas' },
  ];

  return (
    <div className="min-h-screen font-sans text-gray-100 selection:bg-[#aa771c] selection:text-white" style={{ background: theme.background }}>
      <style>{`
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.5s ease-out forwards; }
        .custom-scrollbar::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #111; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #bf953f; }
      `}</style>

      <nav className={`fixed w-full z-50 transition-all duration-500 border-b ${scrolled ? 'bg-[#0a0a0a]/95 backdrop-blur-md border-[#333] shadow-lg' : 'bg-transparent border-transparent'}`}>
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex items-center justify-between h-24">
            <div className="flex-shrink-0 flex items-center gap-4 cursor-pointer" onClick={() => changeView('home')}>
              <div className="relative group">
                <div className="absolute -inset-2 bg-[#bf953f] rounded-full opacity-20 blur-xl group-hover:opacity-40 transition duration-500"></div>
                <img src="https://static.wixstatic.com/media/334454_10c140731ac145d49a2a43206655cd04~mv2.png" alt="VECY Logo" className="relative h-14 w-14 rounded-full bg-black z-10" />
              </div>
              <div className="hidden sm:block">
                <span className="block font-serif text-2xl tracking-widest bg-clip-text text-transparent font-bold" style={{ backgroundImage: theme.goldGradient }}>VECY</span>
                <span className="block text-xs text-[#d4af37] tracking-[0.3em] uppercase mt-1">Bienes Ra√≠ces</span>
              </div>
            </div>
            <div className="hidden md:block">
              <div className="ml-10 flex items-baseline space-x-8">
                {navItems.map((item) => (
                  <button key={item.id} onClick={() => scrollToSection(item.id)} className="text-gray-400 hover:text-white transition-colors duration-300 text-xs font-semibold uppercase tracking-[0.15em] py-2 border-b-2 border-transparent hover:border-[#bf953f]">{item.label}</button>
                ))}
              </div>
            </div>
          </div>
        </div>
      </nav>

      {currentView === 'home' && (
        <>
          <section className="relative min-h-screen flex items-center justify-center pt-20">
            <div className="absolute inset-0 z-0 opacity-15"><div className="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')]"></div></div>
            <div className="relative z-10 max-w-5xl mx-auto px-6 text-center">
              <div className="inline-flex items-center gap-2 mb-8 px-6 py-2 rounded-full border border-[#333] bg-[#1c1c1c]/80 backdrop-blur-md">
                <Award className="w-4 h-4 text-[#bf953f]" />
                <span className="text-gray-300 text-xs font-bold tracking-[0.2em] uppercase">M√°ster en Derecho Inmobiliario Digital</span>
              </div>
              <h1 className="text-4xl md:text-6xl font-serif font-bold mb-8 leading-tight text-white drop-shadow-lg">El Correo Electr√≥nico: <br /><span className="bg-clip-text text-transparent" style={{ backgroundImage: theme.goldGradient }}>Tu Seguro de Vida Inmobiliario</span></h1>
              <p className="text-lg md:text-xl text-gray-400 mb-12 max-w-3xl mx-auto font-light leading-relaxed border-l-2 border-[#333] pl-6 text-left md:text-center md:border-l-0 md:border-t-0">En el mundo jur√≠dico, lo que no est√° escrito no existe. <br className="hidden md:block"/>Descubre por qu√© <span className="text-white font-semibold">WhatsApp es un riesgo procesal</span> y el <span className="text-white font-semibold">Correo es tu salvaguarda patrimonial</span>.</p>
              <div className="flex flex-col md:flex-row gap-6 justify-center items-center">
                <button onClick={() => scrollToSection('mito')} className="relative px-8 py-4 text-sm font-bold text-black uppercase tracking-widest rounded-sm transition-all duration-300 hover:scale-105 shadow-[0_0_25px_rgba(191,149,63,0.4)]" style={{ backgroundImage: theme.goldGradient }}>Iniciar Formaci√≥n</button>
                <button onClick={() => scrollToSection('estrategia')} className="text-[#d4af37] hover:text-white flex items-center gap-2 text-sm font-semibold tracking-widest transition-colors uppercase border-b border-[#333] pb-1 hover:border-white">Ver Estrategia VECY <ChevronDown className="w-4 h-4" /></button>
              </div>
            </div>
          </section>

          <section id="mito" className="py-24 relative bg-[#050505]">
            <div className="max-w-7xl mx-auto px-6">
              <div className="text-center mb-16">
                <h2 className="text-3xl font-serif font-bold mb-4 text-[#d4af37]">La Fragilidad de WhatsApp vs La Solidez del Email</h2>
                <p className="text-gray-500 max-w-3xl mx-auto font-light">An√°lisis t√©cnico-forense de las plataformas de comunicaci√≥n en el contexto de un litigio inmobiliario.</p>
              </div>
              <div className="grid md:grid-cols-2 gap-10">
                <div className="bg-[#1c1c1c] rounded-sm p-8 border border-[#333] relative group hover:border-red-900/50 transition-all duration-500">
                  <div className="absolute top-0 right-0 p-4 opacity-30"><AlertTriangle className="w-16 h-16 text-red-900" /></div>
                  <div className="flex items-center gap-4 mb-8 border-b border-[#333] pb-4"><div className="p-3 bg-[#262626] rounded-full"><MessageCircle className="w-6 h-6 text-red-500" /></div><div><h3 className="text-xl font-bold text-gray-200">WhatsApp / Telegram</h3><span className="text-xs text-red-500 font-mono uppercase">Medios de Alto Riesgo Procesal</span></div></div>
                  <div className="space-y-6">
                    <div className="flex gap-4"><div className="w-1 h-full min-h-[40px] bg-red-900/50"></div><div><h4 className="text-sm font-bold text-gray-300 mb-1">Edici√≥n y Borrado</h4><p className="text-sm text-gray-400 text-left">El remitente puede editar el texto o usar "Eliminar para todos", rompiendo la cadena de custodia.</p></div></div>
                    <div className="flex gap-4"><div className="w-1 h-full min-h-[40px] bg-red-900/50"></div><div><h4 className="text-sm font-bold text-gray-300 mb-1">Mensajes Ef√≠meros</h4><p className="text-sm text-gray-400 text-left">La autodestrucci√≥n de mensajes hace imposible la prueba futura.</p></div></div>
                  </div>
                </div>
                <div className="bg-[#1c1c1c] rounded-sm p-8 relative group shadow-2xl transition-all duration-500 transform hover:-translate-y-1" style={{ border: theme.borderGold }}>
                  <div className="absolute inset-0 bg-gradient-to-b from-[#bf953f]/5 to-transparent pointer-events-none"></div>
                  <div className="absolute -top-3 left-8 bg-[#1c1c1c] px-4 border border-[#bf953f] py-1 text-[#d4af37] text-xs font-bold uppercase tracking-widest shadow-lg">Est√°ndar Jur√≠dico VECY</div>
                  <div className="flex items-center gap-4 mb-8 border-b border-[#bf953f]/20 pb-4"><div className="p-3 rounded-full bg-[#bf953f]/10"><Shield className="w-6 h-6 text-[#d4af37]" /></div><div><h3 className="text-xl font-bold text-[#fcf6ba]">Correo Electr√≥nico</h3><span className="text-xs text-[#d4af37] font-mono uppercase">Prueba Plena e Inmutable</span></div></div>
                  <div className="space-y-6">
                    <div className="flex gap-4"><div className="w-1 h-full min-h-[40px]" style={{ background: theme.goldGradient }}></div><div><h4 className="text-sm font-bold text-[#fcf6ba] mb-1">Inmutabilidad</h4><p className="text-sm text-gray-400 text-left">Una vez en el servidor, el contenido no puede ser alterado unilateralmente.</p></div></div>
                    <div className="flex gap-4"><div className="w-1 h-full min-h-[40px]" style={{ background: theme.goldGradient }}></div><div><h4 className="text-sm font-bold text-[#fcf6ba] mb-1">Trazabilidad T√©cnica</h4><p className="text-sm text-gray-400 text-left">Los encabezados (headers) constituyen una huella digital oficial.</p></div></div>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <section id="ley" className="py-24 relative bg-[#0a0a0a]">
            <div className="relative z-10 max-w-5xl mx-auto px-6">
              <div className="border-l-4 border-[#bf953f] pl-8 py-2 mb-12"><h2 className="text-4xl font-serif text-white font-bold text-left">Fundamento Legal: Ley 527 de 1999</h2><p className="text-[#d4af37] text-lg font-light mt-2 text-left">El pilar del Comercio Electr√≥nico en Colombia</p></div>
              <div className="bg-[#1c1c1c] backdrop-blur-sm border border-[#333] rounded-sm p-10 shadow-[0_0_50px_rgba(0,0,0,0.5)]">
                <div className="flex items-start gap-8">
                  <Scale className="w-16 h-16 text-[#d4af37] flex-shrink-0" />
                  <div>
                    <h3 className="text-2xl font-bold text-[#fcf6ba] mb-4 text-left">¬øPor qu√© esta ley es tu mejor defensa?</h3>
                    <p className="text-gray-400 mb-8 text-base border-b border-[#333] pb-8 text-left leading-relaxed">Antes de 1999, solo el papel firmado val√≠a. La Ley 527 cambi√≥ la historia al otorgar a los <strong>Mensajes de Datos</strong> la misma fuerza probatoria.</p>
                    <div className="grid md:grid-cols-2 gap-10">
                      <div><h4 className="text-[#d4af37] font-bold mb-4 flex items-center gap-2 text-left"><BookOpen className="w-5 h-5" /> Art√≠culos Clave</h4><ul className="space-y-4 text-sm text-gray-400 text-left"><li className="flex gap-3"><span className="text-[#d4af37] font-bold text-lg">‚Ä¢</span><span><strong>Art. 5:</strong> Reconocimiento Jur√≠dico pleno.</span></li><li className="flex gap-3"><span className="text-[#d4af37] font-bold text-lg">‚Ä¢</span><span><strong>Art. 10:</strong> Admisibilidad probatoria garantizada.</span></li></ul></div>
                      <div className="bg-[#111] p-8 rounded border border-[#333]"><h4 className="text-white font-bold mb-4 text-left">Dictamen VECY</h4><p className="text-sm text-gray-400 leading-relaxed text-left mb-4">El correo cumple con los requisitos de <strong>escrito</strong> por su accesibilidad y garant√≠a de inalterabilidad.</p></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <section id="estrategia" className="py-24 bg-[#050505] relative">
            <div className="max-w-7xl mx-auto px-6">
              <div className="flex flex-col md:flex-row justify-between items-end mb-16 border-b border-[#333] pb-8"><div><h2 className="text-3xl md:text-4xl font-serif text-white font-bold mb-2 text-left">Protocolo de Blindaje VECY</h2><p className="text-[#d4af37] text-left">Metodolog√≠a exclusiva VECY BIENES RA√çCES</p></div><div className="mt-4 md:mt-0"><span className="px-4 py-2 border border-[#10b981] bg-[#10b981]/10 text-[#10b981] text-xs font-bold uppercase tracking-widest rounded-sm">Sistema Aprobado</span></div></div>
              <div className="grid md:grid-cols-3 gap-8">
                {[{ step: "01", title: "Omnicanalidad Formal", desc: "WhatsApp para log√≠stica, Correo para el negocio.", icon: <Smartphone className="w-6 h-6 text-[#d4af37]" /> }, { step: "02", title: "Cl√°usula Digital", desc: "Nota legal que valida el acuerdo sin firma f√≠sica.", icon: <FileText className="w-6 h-6 text-[#d4af37]" /> }, { step: "03", title: "Evidencia Certificada", desc: "Uso de 4-72 para notificaciones cr√≠ticas.", icon: <CheckCircle className="w-6 h-6 text-[#d4af37]" /> }].map((item, idx) => (
                  <div key={idx} className="bg-[#1c1c1c] p-8 border-t-2 border-[#bf953f] hover:bg-[#262626] transition-colors shadow-lg group">
                    <div className="flex justify-between items-start mb-6"><span className="text-4xl font-serif font-bold text-[#222] group-hover:text-[#bf953f] transition-colors duration-500">{item.step}</span><div className="p-3 bg-black rounded-full border border-[#333]">{item.icon}</div></div>
                    <h3 className="text-xl font-bold text-[#fcf6ba] mb-4 text-left">{item.title}</h3><p className="text-sm text-gray-400 leading-relaxed text-left">{item.desc}</p>
                  </div>
                ))}
              </div>
            </div>
          </section>

          <section id="herramientas" className="py-24 bg-[#0a0a0a]">
            <div className="max-w-5xl mx-auto px-6 text-center">
              <h2 className="text-3xl font-serif text-white font-bold mb-12">Herramientas del Agente 4.0</h2>
              <div className="grid md:grid-cols-3 gap-8">
                <div className="bg-[#1c1c1c] p-8 rounded-sm border border-[#d4af37] flex flex-col items-center hover:scale-[1.02] transition-transform shadow-[0_0_20px_rgba(191,149,63,0.1)] cursor-pointer group" onClick={() => changeView('generator')}>
                  <div className="relative"><div className="absolute -inset-1 bg-gradient-to-r from-[#bf953f] to-[#aa771c] rounded-full blur opacity-50 group-hover:opacity-100 transition duration-500"></div><div className="relative bg-black rounded-full p-3"><Gavel className="w-10 h-10 text-[#d4af37]" /></div></div>
                  <h3 className="text-xl font-bold text-white mt-6 mb-2">Redactor Jur√≠dico IA</h3><p className="text-sm text-gray-400 mb-6 max-w-sm text-center">Genera reclamaciones, acuerdos de puntas y contratos v√≠a email.</p><button className="px-6 py-2 rounded-sm text-black font-bold text-xs uppercase tracking-widest bg-gradient-to-r from-[#bf953f] to-[#aa771c] hover:shadow-lg">Usar Ahora ‚ú®</button>
                </div>
                <div className="bg-[#1c1c1c] p-8 rounded-sm border border-[#333] flex flex-col items-center hover:border-gray-500 transition-colors">
                  <Mail className="w-12 h-12 text-[#10b981] mb-6" /><h3 className="text-xl font-bold text-white mb-2">MailSuite</h3><p className="text-sm text-gray-400 mb-6 max-w-sm text-center">Rastreo de apertura de correos para saber cu√°ndo leyeron tu oferta.</p><button onClick={() => changeView('support')} className="text-[#d4af37] text-xs font-bold uppercase hover:underline">Preg√∫ntale a Eddu</button>
                </div>
                <div className="bg-[#1c1c1c] p-8 rounded-sm border border-[#333] flex flex-col items-center hover:border-gray-500 transition-colors">
                  <FileCheck className="w-12 h-12 text-[#10b981] mb-6" /><h3 className="text-xl font-bold text-white mb-2">4-72 Certificado</h3><p className="text-sm text-gray-400 mb-6 max-w-sm text-center">Prueba de entrega oficial v√°lida en juzgados para notificaciones.</p><button onClick={() => changeView('support')} className="text-[#d4af37] text-xs font-bold uppercase hover:underline">Preg√∫ntale a Eddu</button>
                </div>
              </div>
            </div>
          </section>
        </>
      )}

      {currentView === 'legal' && <LegalView onBack={() => changeView('home')} />}
      {currentView === 'data' && <DataPolicyView onBack={() => changeView('home')} />}
      {currentView === 'support' && <SupportView onBack={() => changeView('home')} />}
      {currentView === 'generator' && <EmailGeneratorView onBack={() => changeView('home')} />}

      <footer className="py-12 bg-black border-t border-[#222] text-center">
        <div className="max-w-4xl mx-auto px-6">
          <img src="https://static.wixstatic.com/media/334454_10c140731ac145d49a2a43206655cd04~mv2.png" alt="VECY" className="h-16 w-16 mx-auto rounded-full border border-[#bf953f]/30 mb-6 grayscale hover:grayscale-0 transition-all duration-500 bg-black" />
          <p className="text-[#d4af37] font-serif text-lg mb-2">VECY BIENES RA√çCES</p>
          <p className="text-gray-600 text-xs tracking-widest uppercase mb-8">Tecnolog√≠a + Derecho + Innovaci√≥n</p>
          <div className="flex flex-col md:flex-row justify-center gap-6 text-sm text-gray-500">
            <button onClick={() => changeView('legal')} className="hover:text-gray-300 transition-colors text-xs uppercase tracking-widest">Aviso Legal</button>
            <button onClick={() => changeView('data')} className="hover:text-gray-300 transition-colors text-xs uppercase tracking-widest">Pol√≠tica de Datos</button>
            <button onClick={() => changeView('support')} className="hover:text-gray-300 transition-colors text-xs uppercase tracking-widest">Bufete Virtual VECY</button>
          </div>
          <p className="text-gray-700 text-xs mt-12">¬© 2026 VECY. Todos los derechos reservados.</p>
        </div>
      </footer>
    </div>
  );
};

export default App;